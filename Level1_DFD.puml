@startuml è½¦è¾†è°ƒåº¦ç®¡ç†ç³»ç»Ÿ1å±‚æ•°æ®æµå›¾

title è½¦è¾†è°ƒåº¦ç®¡ç†ç³»ç»Ÿ Level 1 Data Flow Diagram

' å®šä¹‰æ ·å¼
skinparam backgroundColor #FEFEFE
skinparam activity {
    BackgroundColor #E3F2FD
    BorderColor #1976D2
    FontColor #0D47A1
}
skinparam database {
    BackgroundColor #F3E5F5
    BorderColor #7B1FA2
}
skinparam actor {
    BackgroundColor #E8F5E8
    BorderColor #2E7D32
}

' å¤–éƒ¨å®ä½“
actor "ç®¡ç†å‘˜\nAdmin" as Admin
actor "è°ƒåº¦å‘˜\nDispatcher" as Dispatcher
actor "å¸æœº\nDriver" as Driver
actor "å®¢æˆ·\nCustomer" as Customer

' ä¸»è¦å¤„ç†è¿‡ç¨‹
rectangle "P1.ç”¨æˆ·ç®¡ç†\nUser Management" as P1
rectangle "P2.è½¦è¾†ç®¡ç†\nVehicle Management" as P2
rectangle "P3.ä»»åŠ¡ç®¡ç†\nTask Management" as P3
rectangle "P4.æƒé™éªŒè¯\nAuth Check" as P4
rectangle "P5.æ—¥å¿—è®°å½•\nLogging" as P5
rectangle "P6.ç»Ÿè®¡åˆ†æ\nStatistics" as P6

' æ•°æ®å­˜å‚¨
database "D1.ç”¨æˆ·æ•°æ®åº“\nUser DB" as D1
database "D2.è½¦è¾†æ•°æ®åº“\nVehicle DB" as D2
database "D3.ä»»åŠ¡æ•°æ®åº“\nTask DB" as D3
database "D4.æ“ä½œæ—¥å¿—\nOperation Log" as D4
database "D5.ç»Ÿè®¡æ•°æ®\nStatistics DB" as D5

' æ•°æ®æµ - ç”¨æˆ·ç®¡ç†ç›¸å…³
Admin --> P1 : DF1.1 ç”¨æˆ·ç™»å½•è¯·æ±‚\n(ç”¨æˆ·å,å¯†ç ,æ—¶é—´æˆ³)
Dispatcher --> P1 : DF1.1 ç”¨æˆ·ç™»å½•è¯·æ±‚
Driver --> P1 : DF1.1 ç”¨æˆ·ç™»å½•è¯·æ±‚
Customer --> P1 : DF1.1 ç”¨æˆ·ç™»å½•è¯·æ±‚

P1 --> Admin : DF1.2 è®¤è¯ç»“æœ\n(ç”¨æˆ·ä¿¡æ¯,ä»¤ç‰Œ,çŠ¶æ€)
P1 --> Dispatcher : DF1.2 è®¤è¯ç»“æœ
P1 --> Driver : DF1.2 è®¤è¯ç»“æœ
P1 --> Customer : DF1.2 è®¤è¯ç»“æœ

P1 --> D1 : ç”¨æˆ·ä¿¡æ¯è¯»å†™
D1 --> P1 : ç”¨æˆ·æ•°æ®æŸ¥è¯¢

' æ•°æ®æµ - è½¦è¾†ç®¡ç†ç›¸å…³
Dispatcher --> P2 : DF2.1 è½¦è¾†ä¿¡æ¯æ›´æ–°\n(è½¦è¾†ID,å±æ€§,æ“ä½œ)
Driver --> P2 : DF2.3 çŠ¶æ€å˜æ›´è¯·æ±‚\n(è½¦è¾†ID,æ–°çŠ¶æ€)

P2 --> Dispatcher : DF2.2 è½¦è¾†çŠ¶æ€åŒæ­¥\n(è½¦è¾†ID,çŠ¶æ€,æ—¶é—´æˆ³)
P2 --> Driver : DF2.4 æ›´æ–°ç¡®è®¤

P2 --> D2 : è½¦è¾†ä¿¡æ¯è¯»å†™
D2 --> P2 : è½¦è¾†æ•°æ®æŸ¥è¯¢

' æ•°æ®æµ - ä»»åŠ¡ç®¡ç†ç›¸å…³
Customer --> P3 : DF3.1 ä»»åŠ¡åˆ›å»ºè¯·æ±‚\n(ä»»åŠ¡è¯¦æƒ…,éœ€æ±‚,ä¼˜å…ˆçº§)
Dispatcher --> P3 : DF3.3 ä»»åŠ¡åˆ†é…æŒ‡ä»¤\n(ä»»åŠ¡ID,è½¦è¾†ID)

P3 --> Customer : DF3.2 ä»»åŠ¡åˆ†é…ç»“æœ\n(ä»»åŠ¡ID,è½¦è¾†,é¢„è®¡æ—¶é—´)
P3 --> Dispatcher : DF3.4 æ‰§è¡ŒçŠ¶æ€é€šçŸ¥

P3 --> D3 : ä»»åŠ¡ä¿¡æ¯è¯»å†™
D3 --> P3 : ä»»åŠ¡æ•°æ®æŸ¥è¯¢

' æ•°æ®æµ - è½¦è¾†ä»»åŠ¡å…³è”
P3 --> P2 : DF3.5 è½¦è¾†åˆ†é…è¯·æ±‚\n(è½¦è¾†ID,ä»»åŠ¡è¦æ±‚)
P2 --> P3 : DF3.6 è½¦è¾†åˆ†é…ç¡®è®¤\n(å¯ç”¨çŠ¶æ€,ä½ç½®)

' æ•°æ®æµ - æƒé™éªŒè¯
P1 --> P4 : DF4.1 æƒé™éªŒè¯è¯·æ±‚\n(ç”¨æˆ·ID,æ“ä½œ,èµ„æº)
P2 --> P4 : DF4.1 æƒé™éªŒè¯è¯·æ±‚
P3 --> P4 : DF4.1 æƒé™éªŒè¯è¯·æ±‚

P4 --> P1 : DF4.2 æƒé™éªŒè¯ç»“æœ\n(å…è®¸/æ‹’ç»,æƒé™è¯¦æƒ…)
P4 --> P2 : DF4.2 æƒé™éªŒè¯ç»“æœ
P4 --> P3 : DF4.2 æƒé™éªŒè¯ç»“æœ

P4 --> D1 : æƒé™ä¿¡æ¯æŸ¥è¯¢
D1 --> P4 : ç”¨æˆ·æƒé™æ•°æ®

' æ•°æ®æµ - æ—¥å¿—è®°å½•
P1 --> P5 : DF5.1 æ“ä½œæ—¥å¿—æ•°æ®\n(æ“ä½œè¯¦æƒ…,ç”¨æˆ·,æ—¶é—´)
P2 --> P5 : DF5.1 æ“ä½œæ—¥å¿—æ•°æ®
P3 --> P5 : DF5.1 æ“ä½œæ—¥å¿—æ•°æ®
P4 --> P5 : DF5.1 å®‰å…¨æ—¥å¿—æ•°æ®

P5 --> P1 : DF5.2 æ—¥å¿—ç¡®è®¤
P5 --> P2 : DF5.2 æ—¥å¿—ç¡®è®¤
P5 --> P3 : DF5.2 æ—¥å¿—ç¡®è®¤

P5 --> D4 : æ—¥å¿—ä¿¡æ¯å†™å…¥
D4 --> P5 : æ—¥å¿—æŸ¥è¯¢(å¯é€‰)

' æ•°æ®æµ - ç»Ÿè®¡åˆ†æ
Admin --> P6 : DF6.1 ç»Ÿè®¡æŸ¥è¯¢è¯·æ±‚\n(æ¡ä»¶,æ—¶é—´èŒƒå›´,ç±»å‹)
Dispatcher --> P6 : DF6.1 ç»Ÿè®¡æŸ¥è¯¢è¯·æ±‚

P6 --> Admin : DF6.2 ç»Ÿè®¡ç»“æœæ•°æ®\n(å›¾è¡¨æ•°æ®,æ±‡æ€»ä¿¡æ¯)
P6 --> Dispatcher : DF6.2 ç»Ÿè®¡ç»“æœæ•°æ®

P6 --> D1 : ç”¨æˆ·ç»Ÿè®¡æ•°æ®
P6 --> D2 : è½¦è¾†ç»Ÿè®¡æ•°æ®
P6 --> D3 : ä»»åŠ¡ç»Ÿè®¡æ•°æ®
P6 --> D4 : æ—¥å¿—ç»Ÿè®¡æ•°æ®
P6 --> D5 : ç»Ÿè®¡ç»“æœè¯»å†™

D1 --> P6 : ç”¨æˆ·æ•°æ®ç»Ÿè®¡
D2 --> P6 : è½¦è¾†æ•°æ®ç»Ÿè®¡
D3 --> P6 : ä»»åŠ¡æ•°æ®ç»Ÿè®¡
D4 --> P6 : æ—¥å¿—æ•°æ®ç»Ÿè®¡
D5 --> P6 : ç¼“å­˜ç»Ÿè®¡æ•°æ®

' ç»Ÿè®¡æ•°æ®æ›´æ–°æµ
P1 --> P6 : ç”¨æˆ·æ“ä½œç»Ÿè®¡
P2 --> P6 : è½¦è¾†æ“ä½œç»Ÿè®¡
P3 --> P6 : ä»»åŠ¡æ“ä½œç»Ÿè®¡
P5 --> P6 : æ—¥å¿—ç»Ÿè®¡æ›´æ–°

note as N1
    <b>æ•°æ®æµç¼–å·è¯´æ˜:</b>
    â€¢ DF1.x: ç”¨æˆ·ç®¡ç†ç›¸å…³
    â€¢ DF2.x: è½¦è¾†ç®¡ç†ç›¸å…³
    â€¢ DF3.x: ä»»åŠ¡ç®¡ç†ç›¸å…³
    â€¢ DF4.x: æƒé™éªŒè¯ç›¸å…³
    â€¢ DF5.x: æ—¥å¿—è®°å½•ç›¸å…³
    â€¢ DF6.x: ç»Ÿè®¡åˆ†æç›¸å…³
end note

note as N2
    <b>å›¾ä¾‹:</b>
    â€¢ ğŸŸ¦ å¤–éƒ¨å®ä½“ (External Entities)
    â€¢ ğŸŸ¨ å¤„ç†è¿‡ç¨‹ (Processes)
    â€¢ ğŸŸª æ•°æ®å­˜å‚¨ (Data Stores)
    â€¢ â”€â”€â”€â–¶ æ•°æ®æµ (Data Flows)
end note

@enduml
