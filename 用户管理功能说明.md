# 车辆调度管理系统 - 管理员用户管理功能说明

## 📋 功能概述

管理员用户管理功能为系统管理员提供完整的用户账户管理能力，包括用户查看、添加、编辑、删除和密码重置等操作。

## 🎯 功能特性

### ✅ 已实现功能

1. **用户列表查看**

   - 显示所有系统用户
   - 展示用户名、角色、创建时间
   - 实时数据更新

2. **添加新用户**

   - 用户名唯一性验证
   - 密码安全设置
   - 角色分配（客户、司机、调度员、管理员）
   - 输入验证和错误提示

3. **编辑用户信息**

   - 修改用户角色
   - 权限检查（不能编辑管理员账户）
   - 实时更新显示

4. **删除用户**

   - 安全删除确认
   - 保护机制（不能删除管理员账户和当前登录用户）
   - 级联数据清理

5. **密码重置**

   - 管理员权限重置用户密码
   - 安全密码策略
   - 操作审计记录

6. **数据刷新**
   - 实时同步数据库数据
   - 表格自动更新

## 🔐 安全特性

### **权限控制**

- 仅管理员可访问用户管理功能
- 操作权限验证
- 敏感操作二次确认

### **数据保护**

- 密码哈希存储
- 防止 SQL 注入
- 事务安全操作

### **操作审计**

- 所有用户管理操作记录日志
- 操作时间戳和操作者信息
- 异常情况记录

## 🎨 用户界面说明

### **主界面**

- 用户表格显示所有用户信息
- 操作按钮面板（添加、编辑、删除、重置密码、刷新）
- 响应式布局设计

### **添加用户对话框**

```
用户名: [输入框] - 必填，唯一性验证
密码: [密码框] - 必填，强度验证
确认密码: [密码框] - 必填，与密码一致性验证
角色: [下拉选择] - 客户/司机/调度员/管理员
```

### **编辑用户对话框**

```
用户名: [只读显示] - 不可修改
角色: [下拉选择] - 可修改用户角色
```

### **密码重置对话框**

```
新密码: [密码框] - 必填
确认密码: [密码框] - 必填，一致性验证
```

## 📊 数据流说明

```
管理员操作
    │
    ▼
用户管理界面 ──▶ 权限验证 ──▶ 数据库操作 ──▶ 结果反馈
    ▲                │            │            │
    │                ▼            ▼            ▼
    └────── 错误处理 ◄──── 事务处理 ◄──── 日志记录
```

## 🔄 业务规则

### **用户添加规则**

1. 用户名不能为空且唯一
2. 密码不能为空且符合强度要求
3. 角色必须从预定义选项中选择
4. 默认密码需要管理员重置

### **用户编辑规则**

1. 不能编辑管理员账户
2. 只能修改用户角色
3. 当前登录用户不能修改自己角色

### **用户删除规则**

1. 不能删除管理员账户
2. 不能删除当前登录用户
3. 删除前必须确认操作
4. 级联删除相关数据

### **密码重置规则**

1. 只能管理员执行
2. 不能重置管理员密码
3. 新密码必须符合安全要求
4. 操作会被记录到审计日志

## 🚀 使用指南

### **访问用户管理**

1. 以管理员身份登录系统
2. 点击底部按钮栏中的"用户管理"
3. 打开用户管理对话框

### **添加新用户**

1. 点击"添加用户"按钮
2. 填写用户信息
3. 选择用户角色
4. 点击确定完成添加

### **编辑用户**

1. 在用户列表中选择用户
2. 点击"编辑用户"按钮
3. 修改用户角色
4. 点击确定保存更改

### **删除用户**

1. 在用户列表中选择用户
2. 点击"删除用户"按钮
3. 确认删除操作
4. 系统自动清理相关数据

### **重置密码**

1. 在用户列表中选择用户
2. 点击"重置密码"按钮
3. 输入新密码并确认
4. 点击确定完成重置

## ⚠️ 注意事项

### **安全提醒**

- 谨慎分配管理员权限
- 定期检查用户账户状态
- 及时清理不需要的用户账户

### **操作建议**

- 添加用户前确认角色需求
- 编辑用户时注意权限影响
- 删除用户前备份重要数据
- 密码重置后及时通知用户

### **维护建议**

- 定期查看操作日志
- 监控用户账户使用情况
- 及时处理异常登录记录

## 📈 扩展规划

### **未来功能**

1. **批量用户操作** - 支持批量添加、删除用户
2. **用户组管理** - 实现用户组和权限继承
3. **高级搜索** - 支持按条件筛选用户
4. **用户统计** - 用户活跃度分析报告
5. **LDAP 集成** - 支持企业目录服务集成

### **性能优化**

1. **分页显示** - 大量用户时的分页加载
2. **缓存机制** - 用户数据缓存优化
3. **异步操作** - 耗时操作异步处理

## 🔧 技术实现

### **核心类说明**

- `MainView.java` - 用户界面和事件处理
- `DataStore.java` - 数据访问和业务逻辑
- `UserDAO.java` - 用户数据访问对象
- `User.java` - 用户实体模型
- `UserRoles.java` - 角色定义常量

### **关键方法**

- `showUserManagement()` - 显示用户管理界面
- `showAddUserDialog()` - 添加用户对话框
- `showEditUserDialog()` - 编辑用户对话框
- `deleteSelectedUser()` - 删除选中用户
- `resetUserPassword()` - 重置用户密码

## 📝 测试要点

### **功能测试**

- [ ] 用户列表正确显示
- [ ] 添加用户功能正常
- [ ] 编辑用户功能正常
- [ ] 删除用户功能正常
- [ ] 密码重置功能正常

### **安全测试**

- [ ] 权限控制正确
- [ ] 输入验证有效
- [ ] SQL 注入防护
- [ ] XSS 攻击防护

### **性能测试**

- [ ] 大量用户数据加载
- [ ] 并发操作处理
- [ ] 内存使用监控

---

**版本信息**: v1.0.0
**最后更新**: 2025-12-23
**负责人**: 系统管理员


